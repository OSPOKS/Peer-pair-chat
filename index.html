<!DOCTYPE html>
<html>
<head>
  <title>Peer to Peer Website</title>
  <script src="https://cdn.jsdelivr.net/npm/peerjs@1.3.2/dist/peerjs.min.js"></script>
</head>
<body>
  <h1>Peer pair chat</h1>
  <button id="connect-btn">Connect to Peer</button>
  <button id="share-btn">Share File</button>
  <div id="file-list"></div>

  <script>
    const peer = new Peer();
    let conn;

    document.getElementById('connect-btn').addEventListener('click', () => {
      conn = peer.connect();
      conn.on('open', () => {
        console.log('Connected to peer!');
      });
    });

    document.getElementById('share-btn').addEventListener('click', () => {
      const fileInput = document.createElement('input');
      fileInput.type = 'file';
      fileInput.onchange = () => {
        const file = fileInput.files[0];
        conn.send(file);
      };
      fileInput.click();
    });

    peer.on('connection', (conn) => {
      conn.on('data', (data) => {
        console.log('Received file:', data);
        const fileLink = document.createElement('a');
        fileLink.href = URL.createObjectURL(data);
        fileLink.download = data.name;
        fileLink.innerHTML = data.name;
        document.getElementById('file-list').appendChild(fileLink);
      });
    });
  </script>
</body>
</html>
